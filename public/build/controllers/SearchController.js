"use strict";define(["./module"],function(e){e.controller("SearchController",["$scope","SearchService",function(e,t){e.events=[],e.lastEvents=[],e.pages={page:0,total:1,totalPages:1},e.pages_orig=angular.copy(e.pages),e.search=function(t){e.reset(),e.menu.searchValue=t,e.nextPage()},e.nextPage=function(){e.pages.page<e.pages.totalPages&&e.menu.searchValue&&(e.pages.page++,t.search({param:e.menu.activeTab.param,location:e.menu.searchValue,artist:e.menu.searchValue,festivalsOnly:e.menu.festivalsOnly,tag:e.menu.activeTag,page:e.pages.page}).success(function(t){if(t.error==8||typeof t.events=="undefined"||t.events.total==0)return!1;e.getEvents(t)}))},e.getEvents=function(t){e.pages.totalPages=t.events["@attr"].totalPages,e.pages.total=t.events["@attr"].total,e.lastEvents=t.events.event},e.reset=function(){e.$broadcast("resetPaths"),e.events=[],e.lastEvents=[],e.pages=angular.copy(e.pages_orig),e.$broadcast("resetAutocomplete")}}])});